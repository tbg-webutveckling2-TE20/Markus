<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Estetarnas värsta mardröm</title>
    </head>

    <style>
        #pad {
            position: absolute;
            top: 0;
            right: 0;
            left: 0;
            bottom: 0;
            background: black;

            display: flex;
            justify-content: center;
            align-items: center;
        }

        #label {
            font: 40px Arial;
            color: white;
            user-select: none;
        }
    </style>

    <body>
        <div id="pad">
            <div id="label">Klicka / Dra</div>
        </div>
    </body>

    <script src="Tone.js"></script>

    <script>
        Tone.start();
        const synth = new Tone.FMSynth().toDestination();

        var label = document.getElementById('label');
        var dragging = false;

        function down(event) {
            var x = event.pageX;
            synth.triggerAttack(x);
            label.innerHTML = Math.round(x) + "Hz";

            var y = event.pageY;
            synth.triggerAttack(y);
            label.innerHTML = Math.round(y) + "Hz";

            dragging = true;
        }

        function up(event) {
            synth.triggerRelease();
            label.innerHTML = 'Klicka / Dra'

            dragging = false;
        }

        function move(event) {
            if (dragging) {
                var x = event.pageX;
                synth.setNote(x)
                label.innerHTML = Math.round(x) + "Hz";

                var y = event.pageY;
                synth.setNote(y)
                label.innerHTML = Math.round(y) + "Hz";
            }
        }

        pad.addEventListener('pointerdown', down);
        pad.addEventListener('pointerup', up);
        pad.addEventListener('pointermove', move);
    </script>

</html>